# (PART) Cookbook: Bookdown book {-}

```{r, include = FALSE}
source("common.R")
```

# Introduction {-#intro-bookdown}

<center> ![](images/illos/bookdown.jpg){width=40%} </center>

This is a cookbook for educators who would like to use bookdown to organize and deliver educational content for their audience. Despite the name, using bookdown doesn't mean that what you make *has* to be a book--but a bookdown site does come with some built-in features (e.g. its hallmark heavy-duty table of contents) that make it well-suited for long-form content (or many R Markdown files that need organizing). This, and the lack of a navbar make a bookdown site feel somewhat less like a typical website and a bit more like a textbook, but how you use it is up to you. You can place an entire course-worth's of materials in a bookdown book, or you could pare down your TOC headers and create a bookdown site containing only the content for a short workshop. This rstudio4edu resource is itself a bookdown! 

In short, bookdown's main features include:

* A very prominent table of contents
* Cross-references
* Numbered figures, equations, and tables
* Distribution of your book as a PDF, an HTML website, etc.
* A built-in search feature (that's a bit unintuitive to use)


<div class = side-by-side>
<div class = side1>

```{r echo = FALSE, fig.link = "#make-book"}
knitr::include_graphics("images/illos/intro-book.jpg")
```

</div>
<div class = side2>

#### [Make a book](#make-book)
Here, we'll guide you through creating an out-of-the-box bookdown book. We make only the most minimal changes to content and style necessary to get you a shareable bookdown site.

</div>
</div>

\

<div class = side-by-side>
<div class = side1>

```{r, fig.align='center', echo= FALSE, fig.link = "#book-care"}
knitr::include_graphics("images/illos/Caring-book.jpg")
```

</div>
<div class = side2>

#### [Caring for your site](#book-care)
You'll develop a workflow for editing your site, adding new content, and hiding pages that are works-in-progress.

</div>
</div>

\

<div class = side-by-side>
<div class = side1>

```{r, fig.align='center', echo= FALSE, out.width="52%", fig.link = "#book-dress"}
knitr::include_graphics("images/illos/Dressup-book.jpg")
```

</div>
<div class = side2>

#### [Dress it up](#book-dress)

Here, you'll find instructions for no-fuss website customizations that leverage built-in features that *do not* rely on knowing, learning, or using CSS.

</div>
</div>

\

<div class = side-by-side>
<div class = side1>

```{r, fig.align='center', echo= FALSE, out.width="50%", fig.link = "#book-fancy"}
knitr::include_graphics("images/illos/Fancy-book.jpg")
```

</div>
<div class = side2>

#### [Make it fancier](#book-fancy)

If you want to take your customization further, we show you how to make your book look like the crème de la crème with some CSS, HTML, and (a teensy bit of) JavaScript.

</div>
</div>

## What are we making? {-}

If you have experience making basic R Markdown sites, then you can think of a bookdown as an R Markdown site with additional YAML files (there are THREE total) and some more rigid rules about what can start each document. 

Anytime you use a level 1 header (i.e. with a single `#`), this becomes a new book chapter that gets added as a top level entry in your TOC and also manifests as its own "page" in your book.

You can use multiple .Rmd files to organize your book content, but how you separate your `.Rmd`s doesn't at all determine what becomes separate pages and what doesn't. This is one important difference from an RMD site---the only thing that triggers the division of book sections are the level 1 headers, whether they're in separate `.Rmd`s or not. When it's time to put the book together, bookdown essentially pastes all the `.Rmd`s together, creating a super long `.Rmd` file. And voilà, you book is made. 

* **Level 1 headers**
* **Three YAMLS**



## Pros and cons of using bookdown sites {-}

* Pros: Feels like working with a regular RMD site, once you get the hang of the setup. 

* Cons: Three YAMLs. Can't use tabsets.


## Is this cookbook for you? {-}

**Pre-requisites:**

* You have a [GitHub account](https://github.com/)
* You are comfortable with the basics of using R and RStudio
* You understand how R projects work
* You understand the difference between a regular R script and an R Markdown document
* You have some familiarity working with R Markdown documents
* You at least vaguely know what a YAML is

**What you’ll learn:**

* How to compile multiple R Markdown files into a Bookdown book
* How to add basic customization through themes using built in options
* How to publish your Bookdown for free via GitHub Pages


## Learning resources {-}

*
*
* 

# Make a book {#make-book}

## tl;dr

This tl;dr is for readers who are already experienced with GitHub and want to see our “cheatsheet” version of the rest of this chapter. If you are looking for screenshots plus some hand-holding, we think you’ll benefit from reading the rest of this chapter.

**Here’s how you make an bookdown site from scratch, using a built-in site skeleton as a template:**

1. Start with an empty RStudio project linked to a remote GitHub repository that you can push/pull to from your local copy in RStudio.

1. In your project, create a simple shell for a bookdown website shell by running the following code in your R console:

    ```{r book-skeleton, eval = FALSE}
    bookdown:::bookdown_skeleton(getwd())
    ```

## Getting set up

### Packages needed

We'll use the following packages:

```{r, eval=FALSE}
#install.packages("bookdown")
#install.packages("usethis")

library(usethis)
```

### Make a project {#book-proj-first}

For your first bookdown site, we recommend starting by creating a GitHub repository online first, then making a project in RStudio. 

<!--TODO: add link to other workflow that we recommend later-->

```{r child = 'modules/github-first-project.Rmd'}

```


### Make a book skeleton {#book-site-skeleton}

    ```{r, eval = FALSE}
      bookdown:::bookdown_skeleton(getwd())
    ```

:::tip 
Note that we use ::: here (with three colons!) to generate important infrastructure files we need.
:::

## A mini orientation

Our skeleton created two out-of-the-box content files for our site:



## Push to GitHub {#book-push}

Let's get these website files pushed up to our remote repository on GitHub. Do the following from RStudio:

1. **Click *Git* ** in the same RStudio pane that also contains the *Environment* tab.

2. **Check the box(es)** under the "Staged" column and click *Commit*.

3. **Add a commit message** like "initial commit" and then click *Push*.

[SCREENSCHOT]

### Two getting-started workflows:

```{r child = "modules/github-first-project.Rmd"}
```

```{r, eval=FALSE}
bookdown:::bookdown_skeleton(getwd())
```

:::tip 
Note that we use ::: here (with three colons!) to generate important infrastructure files we need.
:::

<br>

Though we recommend a “GitHub first” workflow, it is possible to start with RStudio project wizard to create a new R book project and then move to GitHub:

1. Click *File* > *New Project* > *New Directory*
2. Scroll down and select: *Book Project using bookdown*
3. Then, optionally, to connect to GitHub:

```{r, eval=FALSE}
usethis::use_git()
usethis::use_github() # you have to have a PAT setup
```

### Rendering a skeletal book

Regardless of which workflow you used, you should now have a directory structure with contents like these:
![](INSERT SCREEN SHOT)

These files here are enough to create a skeleton of a book. Let's render it!

:::rstudio-tip
Do not click on *Knit* to render your book! **[WHY?]** If you've already knit, then just clear out the `_book` folder. 
:::

* In the RStudio toolbar menu, click on *Addins* > *Preview Book*

![INSERT SCREEN SHOT of addins]()

But you can also render it these other ways instead:

* 1)  The line below does the exact same thing as *Preview Book*:
```{r, eval=FALSE}
bookdown::render_book('index.Rmd')
```

* 2) Or you can use:
```{r, eval=FALSE}
bookdown::serve_book()
```



### Three kinds of YAMLs

In RStudio navigate to... 

#### index.Rmd YAML
`index.Rmd` is going to be Chapter 1. 

By default, this YAML looks like this:

```
--- 
title: "A Minimal Book Example"
author: "Yihui Xie"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
description: "This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook."
---

```

#### _output.yml

By default, this YAML looks like this:

```
bookdown::gitbook:
  css: style.css
  config:
    toc:
      before: |
        <li><a href="./">A Minimal Book Example</a></li>
      after: |
        <li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
    download: ["pdf", "epub"]
bookdown::pdf_book:
  includes:
    in_header: preamble.tex
  latex_engine: xelatex
  citation_package: natbib
  keep_tex: yes
bookdown::epub_book: default
```

#### _bookdown.yml

Here's what this YAML will look like by default.

```
book_filename: "basic-course-book"
delete_merged_file: true
language:
  ui:
    chapter_name: "Chapter "
```





## Part 2: Create your content {-}


### Structure

#### Files to change
#### What not to touch

#### Figures and Tables
#### Cross References
#### Citations
#### References

## Part 3: Dress it up {-}

Optional ways to make your bookdown site look `r emo::ji ("sparkles")` faaaabulous `r emo::ji ("sparkles")`.

### Add a favicon

You know the little tiny icon that gets placed in the corner of your browser tabs? That's a favicon!

**How to:**

1. Save the image you'd like to use (for best results it should be square) in your project directory
2. Open your bookdown `index.Rmd` file
3. Add `favicon: <"insert-path-to-favicon.ico">` in the YAML, like so:

```
--- 
title: "rstudio4edu"
subtitle: "A Handbook for Teaching and Learning with RStudio"
author: 
- Desirée De Leon^[RStudio, https://desiree.rbind.io/]
- Alison Hill^[RStudio, https://alison.rbind.io/]
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
cover-image: images/books.jpg
description: "A work-in-progress"
github-repo: rstudio4edu/rstudio4edu-book
favicon: "images/favicon.png"
always_allow_html: yes
---
```

:::tip

**Note**: In the example above, we can use a PNG image file, but ICO files (with the `.ico` extension) are actually preferred because ________. You can also use a GIF. 
:::

Don't have an image? Make one from text or an emoji:

**How to:**

1. Go to [free favicon generator](https://favicon.io/) and create a favicon
2. Download and move the `.ico` file into your project directory
3. Open your bookdown `index.Rmd` file
4. Add `favicon: <"favicon.ico">` in the YAML.

:::tip

A favicon can be added to both Distill sites and Bookdown sites with the addition directly into the YAML. But in bookdown, the favicon file must be put in "quotes" (it's not quoted in Distill)!

:::


### Highlight options
Possible styles are `default`, `tango`, `pygments`, `kate`, `monochrome`, `espresso`, `zenburn`, and `haddock`.
### Chapters or...? {-}
### Numbered or Not {-}



## Part 4: Put your book out there! {-}

### Online
### As a PDF
### As....


## Workflow for maintenance {-}

Once you have the website in place, it’s likely that you will want to update it periodically or add new pages. Here’s what that workflow looks like for us:  

1. Open my existing site RStudio project
2. Go to *Addins* > *Preview Book* to render the book
3. 
4. 
5. 

## Gotchas to watch out for

(Or call this section, Notes for using your book once it's made)

- We've already covered not knitting when rendering your book.
- All chapter `.Rmd` files MUST begin with # Level 1 Header no matter what. Any content before that will not appear.
- Making sure your book contents are put together in the right order: For this to happen automatically, you would need to create .Rmd file names that start with 01, 02, etc. This seems fine and dandy, but think of how annoying it would be if you decided to switch around the order of all your chapters--you would have to rename multiple files (ugh!). So, it is recommended to instead go to the `_bookdown.yml` and set the chapter order there. This is kind of like the bookdown builder's instruction manual for chapter order. Swap around your chapters as much as you'd like in this single file and be done.
- In `_bookdown.yml`, when you fill out `chapter_name`: What follows should include a space after it, within the quotes!
- Explain the never-ending loop of book-rendering [Would be good to get some more context into what sorts of things trigger this behavior.] Common problem! Exit out of this by going to *Session* > *Terminate R...*.
- re-explain search here https://github.com/rstudio/bookdown/issues/216



# Make a book for a workshop

# Make a book for a course

# Make it fancier

Once you’ve built the basic structure for your book, if you’d like to customize it even further, we can do a little bit of HTML and CSS work to add-on some fancy features.  

## Anatomy of a fancy book 
Here's where we're starting: 

[SCREENSHOT OF PLAIN BOOK]

And here's where we're going:

[SCREENSHOT OF FANCY BOOK, ANNOTATED]

**Link back to CSS Crash Course** 

## Add Google Fonts {-}

1. Go to the [Google Fonts website](https://www.google.com/fonts) and select the font you want. 
2. Click the 




Customize your fonts 
## Add hero image {-}

1. Create an HTML file with these contents and save it in your project directory. 

```{r, eval=FALSE}

<link href="style.css" rel="stylesheet">

<script src="hideOutput.js"></script>

<div class="hero-image-container"> 
  <img class= "hero-image" src="images/books.jpg">
</div>
```

\

2. Open up `output.yml` and reference using the `before_body:` option

```{r, eval=FALSE}
bookdown::gitbook:
  css: style.css
  includes:
    before_body: big-image.html
```

\

3. Add CSS to your styles.css file to style it

```{r, eval = FALSE}

.hero-image-container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 390px;
  background-color: #3fb5bd;
}

.hero-image {
  width: 100%;
  height: 390px;
  object-fit: cover;
}

.page-inner {
  padding-top: 440px !important;
}

```

**`position: absolute`**: To make the image go all the way across the page (not including the table of contents), we have to make the container that the image sits in `position: absolute` and then spell out its position explicitly (with `top`, `left`, `right`, etc. all set to `0`.)  These positions are relative to the container that `.hero-image-container` itself is inside.

**`.page-inner`**: All of our book content is by defautl inside a container labelled `.page-inner`. We don't want our book content to get stuck hiding behind the big image we just stuck to the top of our page. So, we need to move the book content down by *at least* the height of our image + about `50px`. 



## Table of contents {-}
### Hierarchy styling {-}
### Background {-}
## Add a logo {-}
## Sidebar Divs {-}
## Drop Caps {-}
## Copy to Clipboard {-}




